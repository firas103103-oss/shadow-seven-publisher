import{j as e,u as s}from"./query-vendor-Dt0le05-.js";import{C as r,a as t,b as n,c as a,d as l}from"./card-B349gX0B.js";import{a as i,h as o,L as c}from"./react-vendor-Bs_e_mwx.js";import{c as d,a as u,L as m,B as x}from"./index-3Yd-DfCj.js";import{a as f}from"./index-DH6jIlqu.js";import{F as p,f as h,g as j,A as g,B as v,T as N}from"./ui-vendor-CeVg9BGE.js";import"./chart-vendor-ce8NDi9W.js";import"./geminiClient--LmOtRoR.js";import"./jszip.min-Daw9fIkx.js";const y=u("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function b({className:s,variant:r,...t}){return e.jsx("div",{className:d(y({variant:r}),s),...t})}function w(...e){const s=e[0];if(1===e.length)return s;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const t=r.reduce((s,{useScope:r,scopeName:t})=>({...s,...r(e)[`__scope${t}`]}),{});return i.useMemo(()=>({[`__scope${s.scopeName}`]:t}),[t])}};return r.scopeName=s.scopeName,r}function C(e,s){if("function"==typeof e)return e(s);null!=e&&(e.current=s)}var $=Symbol.for("react.lazy"),_=o[" use ".trim().toString()];function S(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===$&&"_payload"in e&&("object"==typeof(s=e._payload)&&null!==s&&"then"in s);var s}function R(s){const r=P(s),t=i.forwardRef((s,t)=>{let{children:n,...a}=s;S(n)&&"function"==typeof _&&(n=_(n._payload));const l=i.Children.toArray(n),o=l.find(M);if(o){const s=o.props.children,n=l.map(e=>e===o?i.Children.count(s)>1?i.Children.only(null):i.isValidElement(s)?s.props.children:null:e);return e.jsx(r,{...a,ref:t,children:i.isValidElement(s)?i.cloneElement(s,void 0,n):null})}return e.jsx(r,{...a,ref:t,children:n})});return t.displayName=`${s}.Slot`,t}function P(e){const s=i.forwardRef((e,s)=>{let{children:r,...t}=e;if(S(r)&&"function"==typeof _&&(r=_(r._payload)),i.isValidElement(r)){const e=function(e){let s=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning;if(r)return e.ref;if(s=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(r),n=function(e,s){const r={...s};for(const t in s){const n=e[t],a=s[t];/^on[A-Z]/.test(t)?n&&a?r[t]=(...e)=>{const s=a(...e);return n(...e),s}:n&&(r[t]=n):"style"===t?r[t]={...n,...a}:"className"===t&&(r[t]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}(t,r.props);return r.type!==i.Fragment&&(n.ref=s?function(...e){return s=>{let r=!1;const t=e.map(e=>{const t=C(e,s);return r||"function"!=typeof t||(r=!0),t});if(r)return()=>{for(let s=0;s<t.length;s++){const r=t[s];"function"==typeof r?r():C(e[s],null)}}}}(s,e):e),i.cloneElement(r,n)}return i.Children.count(r)>1?i.Children.only(null):null});return s.displayName=`${e}.SlotClone`,s}var E=Symbol("radix.slottable");function M(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===E}var V=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((s,r)=>{const t=R(`Primitive.${r}`),n=i.forwardRef((s,n)=>{const{asChild:a,...l}=s,i=a?t:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),e.jsx(i,{...l,ref:n})});return n.displayName=`Primitive.${r}`,{...s,[r]:n}},{}),O="Progress",[k]=function(s,r=[]){let t=[];const n=()=>{const e=t.map(e=>i.createContext(e));return function(r){const t=r?.[s]||e;return i.useMemo(()=>({[`__scope${s}`]:{...r,[s]:t}}),[r,t])}};return n.scopeName=s,[function(r,n){const a=i.createContext(n);a.displayName=r+"Context";const l=t.length;t=[...t,n];const o=r=>{const{scope:t,children:n,...o}=r,c=t?.[s]?.[l]||a,d=i.useMemo(()=>o,Object.values(o));return e.jsx(c.Provider,{value:d,children:n})};return o.displayName=r+"Provider",[o,function(e,t){const o=t?.[s]?.[l]||a,c=i.useContext(o);if(c)return c;if(void 0!==n)return n;throw new Error(`\`${e}\` must be used within \`${r}\``)}]},w(n,...r)]}(O),[z,A]=k(O),B=i.forwardRef((s,r)=>{const{__scopeProgress:t,value:n=null,max:a,getValueLabel:l=q,...i}=s;(a||0===a)&&I(a);const o=I(a)?a:100;null!==n&&J(n,o);const c=J(n,o)?n:null,d=F(c)?l(c,o):void 0;return e.jsx(z,{scope:t,value:c,max:o,children:e.jsx(V.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":F(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":D(c,o),"data-value":c??void 0,"data-max":o,...i,ref:r})})});B.displayName=O;var L="ProgressIndicator",W=i.forwardRef((s,r)=>{const{__scopeProgress:t,...n}=s,a=A(L,t);return e.jsx(V.div,{"data-state":D(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:r})});function q(e,s){return`${Math.round(e/s*100)}%`}function D(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function F(e){return"number"==typeof e}function I(e){return F(e)&&!isNaN(e)&&e>0}function J(e,s){return F(e)&&!isNaN(e)&&e<=s&&e>=0}W.displayName=L;var K=B,T=W;const X=i.forwardRef(({className:s,value:r,...t},n)=>e.jsx(K,{ref:n,className:d("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...t,children:e.jsx(T,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));function Z(){const{data:i,isLoading:o}=s({queryKey:["dashboard-stats"],queryFn:()=>f.getDashboardStats()}),d=[{title:"إجمالي المخطوطات",value:i?.totalManuscripts||0,icon:p,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"قيد المعالجة",value:i?.processing||0,icon:h,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"منتهي",value:i?.completed||0,icon:j,color:"text-green-600",bgColor:"bg-green-100"},{title:"يحتاج مراجعة",value:i?.needsReview||0,icon:g,color:"text-red-600",bgColor:"bg-red-100"}];return o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{size:"md",text:"جاري التحميل..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"لوحة التحكم"}),e.jsx("p",{className:"text-muted-foreground",children:"مرحباً بك في Shadow Seven - Agency in a Box"})]}),e.jsx(c,{to:"/upload",children:e.jsxs(x,{children:[e.jsx(v,{className:"ml-2 h-4 w-4"}),"رفع مخطوط جديد"]})})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:d.map(s=>e.jsxs(r,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:s.title}),e.jsx("div",{className:`p-2 rounded-lg ${s.bgColor}`,children:e.jsx(s.icon,{className:`h-4 w-4 ${s.color}`})})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.value}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.value>0&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(N,{className:"h-3 w-3 ml-1"}),"+12% من الشهر الماضي"]})})]})]},s.title))}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[e.jsxs(r,{className:"col-span-4",children:[e.jsxs(t,{children:[e.jsx(n,{children:"المخطوطات الأخيرة"}),e.jsx(l,{children:"آخر المخطوطات التي تم رفعها أو تحديثها"})]}),e.jsx(a,{children:e.jsx("div",{className:"space-y-4",children:i?.recentManuscripts?.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(p,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.author})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(b,{variant:"completed"===s.status?"success":"processing"===s.status?"warning":"default",children:["completed"===s.status&&"منتهي","processing"===s.status&&"قيد المعالجة","draft"===s.status&&"مسودة"]}),e.jsx(x,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(c,{to:`/manuscripts/${s.id}`,children:"عرض"})})]})]},s.id))||e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(p,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"لا توجد مخطوطات حتى الآن"}),e.jsx(c,{to:"/upload",children:e.jsx(x,{variant:"link",className:"mt-2",children:"ابدأ برفع أول مخطوط"})})]})})})]}),e.jsxs(r,{className:"col-span-3",children:[e.jsxs(t,{children:[e.jsx(n,{children:"مهام المعالجة"}),e.jsx(l,{children:"المهام الجارية حالياً"})]}),e.jsx(a,{children:e.jsx("div",{className:"space-y-4",children:i?.processingJobs?.map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:s.title}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.progress,"%"]})]}),e.jsx(X,{value:s.progress}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.currentStep})]},s.id))||e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(h,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"لا توجد مهام قيد المعالجة"})]})})})]})]}),e.jsxs(r,{children:[e.jsxs(t,{children:[e.jsx(n,{children:"إجراءات سريعة"}),e.jsx(l,{children:"الخدمات الأكثر استخداماً"})]}),e.jsx(a,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(c,{to:"/elite-editor",children:e.jsxs(x,{variant:"outline",className:"w-full h-auto py-4 flex-col gap-2",children:[e.jsx("div",{className:"p-3 rounded-lg bg-accent",children:e.jsx(j,{className:"h-6 w-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:"المحرر النخبوي"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"تحرير احترافي بالذكاء الاصطناعي"})]})]})}),e.jsx(c,{to:"/book-merger",children:e.jsxs(x,{variant:"outline",className:"w-full h-auto py-4 flex-col gap-2",children:[e.jsx("div",{className:"p-3 rounded-lg bg-accent",children:e.jsx(v,{className:"h-6 w-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:"دمج الكتب"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"دمج عدة مخطوطات في كتاب واحد"})]})]})}),e.jsx(c,{to:"/cover-designer",children:e.jsxs(x,{variant:"outline",className:"w-full h-auto py-4 flex-col gap-2",children:[e.jsx("div",{className:"p-3 rounded-lg bg-accent",children:e.jsx(p,{className:"h-6 w-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:"تصميم الغلاف"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"إنشاء غلاف جذاب بالذكاء الاصطناعي"})]})]})})]})})]})]})}X.displayName=K.displayName;export{Z as default};
